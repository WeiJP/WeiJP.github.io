<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  
    
      
    

    
  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Bungee:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="无聊的XX十之八九，而有趣的灵魂万里挑一">
<meta property="og:type" content="website">
<meta property="og:title" content="Wei&#39;Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Wei&#39;Blog">
<meta property="og:description" content="无聊的XX十之八九，而有趣的灵魂万里挑一">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Wei&#39;Blog">
<meta name="twitter:description" content="无聊的XX十之八九，而有趣的灵魂万里挑一">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Wei'Blog</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Wei'Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Kategorien
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/07/blog17120701/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/07/blog17120701/" itemprop="url">《笔记》iOS deviceToken的获取时机及推送相关</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-07T00:27:50+08:00">
                2017-12-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS相关/" itemprop="url" rel="index">
                    <span itemprop="name">iOS相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近几天在做一个新项目，需要用到deviceToken，于是有了以下的问题：<br><strong>1、</strong> deviceToken是什么时机能获取，即</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (void)application:(UIApplication *)application</span><br><span class="line">didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken</span><br><span class="line">// Tells the delegate that the app successfully registered with Apple Push Notification service (APNs).</span><br></pre></td></tr></table></figure>
<p> 印象中是在点了弹出通知权限的alert的同意键，然后才开始注册apns，然后回调该方法，获取deviceToken。<br> 但是如此是满足不了当前的需求的，我需要无论允许还是拒绝，都能拿到deviceToken，解决方案为：<br> 勾选<strong>Background Modes</strong>中的<strong>remote notification</strong> 和 <strong>background fetch</strong>，即可达到在注册notificationSettings的时候获取到<strong><em>deviceToken</em></strong>，也就是弹权限请求alert的同时。<em>(注：其实只勾选前者即可)</em></p>
<p><strong>2、</strong> 由上引发思考，上面勾选的两个设置有什么作用？<br>说来惭愧，这俩都是iOS 7就引入的新特性了。。。。一个是后台应用刷新，一个是静默推送（Silent Remote Notifications），网上关于这俩的资源还是很多的，也没啥可说的，照着文档来就行</p>
<p><strong>3、</strong> 为什么勾选（打开）静默推送就可以不经过用户允许，直接拿到<strong><em>deviceToken</em></strong> 呢，那么是不是可以无视用户的通知权限来进行静默推送呢？于是测试了一下，果然如此，在我点击了拒绝之后，仍然能收到静默推送<br><img src="http://img.blog.csdn.net/20171207001729490?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzY3OTg4Mg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>同时发现，app前台运行时，普通推送也能收到，只是不会展示，猜测后台时也会收到，等回头不忙了，再写个<strong>UNNotificationServiceExtension</strong> 测试一下</p>
<p>推送作为一个很重要的功能，几乎每次iOS大版本都会有改动，用起来还是谨慎一些为好，多测试一下</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/15/blog17112401/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/15/blog17112401/" itemprop="url">记录一下，关于qq空间分享的Icon不显示的问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-15T16:40:27+08:00">
                2017-11-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS相关/" itemprop="url" rel="index">
                    <span itemprop="name">iOS相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://img.blog.csdn.net/20171115163817275?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzY3OTg4Mg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>没用第三方的分享sdk，然后腾讯自己的文档实在是辣眼睛，分享url到QQ好友没有任何问题，分享到QQ空间Icon加载不出来，也怀疑过是不是尺寸的问题，最终发现是不能分享本地图片，必须是图片的URL才行，简直太坑了，官方文档只字不提，而且还给了使用本地图片的Api，下边是从shareSDK的官网上找到的说明：</p>
<hr>
<p><strong>QQ空间支持分享文字和图文</strong><br>参数说明<br>title：最多200个字符<br>text：最多600个字符</p>
<p>QQ空间本身不支持分享本地图片，因此如果想分享本地图片，需要去QQ互联，也就是注册应用的地方，先让你的应用通过审核，然后获取upload_pic这个接口的权限，图片会先上传到ShareSDK的文件服务器，得到连接以后才分享此链接。本地图片更耗流量。</p>
<hr>
<p>所以，用第三方分享sdk的小伙伴应该是没有什么问题的。。。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/03/blog-misic-FarewellMyConcubine/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/03/blog-misic-FarewellMyConcubine/" itemprop="url">当爱已成往事 - 张国荣</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-03T10:50:34+08:00">
                2017-07-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Favorite-MV/" itemprop="url" rel="index">
                    <span itemprop="name">Favorite MV</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>在youtube上偶然间听到的，歌好听，mv也好看，非常非常经典的电影，如果有缘看到这个博客，建议去看《霸王别姬》</strong></p>
<p><em><a href="https://www.youtube.com/watch?v=0kA7sSBH93o&amp;list=RD0kA7sSBH93o&amp;t=259" title="Farewell my concubine" target="_blank" rel="noopener">mv地址（需翻墙）</a></em></p>
<p><em><a href="https://www.bilibili.com/video/av11786772/" title="Farewell my concubine" target="_blank" rel="noopener">mv地址（不需翻墙）</a></em></p>
<img src="/2017/07/03/blog-misic-FarewellMyConcubine/mv1.png">
<p>Song: 當愛已成往事<br>Artist:  張國榮 | Leslie Cheung<br>Main theme of Farewell My Concubine (  霸王別姬) (1993) by Chen Kaige</p>
<p>當愛已成往事</p>
<p>往事不要再提 人生已多風雨 縱然記憶抹不去 愛與恨都還在心裡<br>真的要斷了過去 讓明天好好繼續 你就不要再苦苦追問我的消息<br>愛情它是個難題 讓人目眩神迷 忘了痛或許可以 忘了你卻太不容易<br>你不曾真的離去 你始終在我心裡 我對你仍有愛意 我對自己無能為力<br>因為我仍有夢 依然將你放在我心中 總是容易被往事打動 總是為了你心痛<br>別流連歲月中 我無意的柔情萬種 不要問我是否再相逢 不要管我是否言不由衷<br>為何你不懂 只要有愛就有痛 有一天你會知道 人生沒有我並不會不同<br>人生已經太匆匆 我好害怕總是淚眼朦朧 忘了我就沒有痛 將往事留在風中</p>
<p>~間奏~</p>
<p>因為我仍有夢 依然將你放在我心中 總是容易被往事打動 總是為了你心痛<br>別流連歲月中 我無意的柔情萬種 不要問我是否再相逢 不要管我是否言不由衷<br>為何你不懂 只要有愛就有痛 有一天你會知道 人生沒有我並不會不同<br>人生已經太匆匆 我好害怕總是淚眼朦朧 忘了我就沒有痛 將往事留在風中</p>
<p>為何你不懂 只要有愛就有痛 有一天你會知道 人生沒有我並不會不同<br>人生已經太匆匆 我好害怕總是淚眼朦朧 忘了我就沒有痛 將往事留在風中</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/29/blogLocalNotification/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/29/blogLocalNotification/" itemprop="url">关于iOS 9之前的本地推送，本地推送杀掉进程后到底能不能收到？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-29T11:49:01+08:00">
                2016-11-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS相关/" itemprop="url" rel="index">
                    <span itemprop="name">iOS相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="缘起一个面试："><a href="#缘起一个面试：" class="headerlink" title="缘起一个面试："></a>缘起一个面试：</h2><p><strong>面试官</strong>:“本地推送，在杀掉进程以后还可以收到吗？”<br><strong>我</strong>（非常肯定的）:“可以的”<br><strong>面试官</strong>：“并不能，不信你回去写个demo吧”<br><strong>我</strong>：“我写过本地推送，确实是可以的啊”<br><strong>面试官</strong>：“如果杀掉进程后，还能收到本地推送，那还要远程推送干什么呢？？？”<br><strong>我</strong>：“。。。。。。”</p>
<p>本来无意来计较这件事，但是面试过程中，面试官态度比较强硬、瞧不起人，让人很反感，但还是不说哪家公司了</p>
<p><img src="http://img.blog.csdn.net/20161129104433799" alt="这个结果根本不意外吧，稍微做过一两年开发的都知道"></p>
<p><strong>今天我就写一个Demo，然后再唠叨原理</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">// 以下代码只为简单的验证问题，不是教程，诸位凑合看吧</span><br><span class="line">// 注册通知</span><br><span class="line">+ (void)registerPush</span><br><span class="line">&#123;</span><br><span class="line">    UILocalNotification *localNotification = [[UILocalNotification alloc] init];</span><br><span class="line">    </span><br><span class="line">    localNotification.fireDate = [NSDate dateWithTimeIntervalSinceNow:15];</span><br><span class="line">    localNotification.alertBody = @&quot;I am a LocalNotification!&quot;;</span><br><span class="line">    localNotification.alertAction = @&quot;check&quot;;</span><br><span class="line">    localNotification.hasAction = YES;</span><br><span class="line">    localNotification.applicationIconBadgeNumber = 1;</span><br><span class="line">    </span><br><span class="line">    [[UIApplication sharedApplication] scheduleLocalNotification:localNotification];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *   iOS 8 以后的版本需要添加推送类型</span><br><span class="line"> *   官方文档：In iOS 8.0 and later, your application must register for user notifications using -[UIApplication registerUserNotificationSettings:] before being able to schedule and present UILocalNotifications</span><br><span class="line"> */</span><br><span class="line">+ (void)registerPushType</span><br><span class="line">&#123;</span><br><span class="line">    if (NSFoundationVersionNumber &gt;= NSFoundationVersionNumber_iOS_8_0) &#123;</span><br><span class="line">        UIUserNotificationType type=UIUserNotificationTypeBadge | UIUserNotificationTypeAlert | UIUserNotificationTypeSound;</span><br><span class="line">        UIUserNotificationSettings *setting=[UIUserNotificationSettings settingsForTypes:type categories:nil];</span><br><span class="line">        [[UIApplication sharedApplication]registerUserNotificationSettings:setting];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 清除角标</span><br><span class="line">+ (void)clearIconBadgeNumber</span><br><span class="line">&#123;</span><br><span class="line">    [UIApplication sharedApplication].applicationIconBadgeNumber = 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="本地推送的机制"><a href="#本地推送的机制" class="headerlink" title="本地推送的机制"></a>本地推送的机制</h2><p>看官方文档<a href="https://developer.apple.com/reference/uikit/uilocalnotification?language=objc" target="_blank" rel="noopener">点击这里</a>，第一句话是：<br>The operating system is responsible for delivering local notifications at their scheduled times; the app does not have to be running for this to happen.Although local notifications are similar to remote notifications in that they are used for displaying alerts, playing sounds, and badging app icons, they are composed and delivered locally and do not require connection with remote servers.<br>明确说明了本地推送是由操作系统负责触发的，不需要App本身，后边还特别注明了尽管与远程推送一样的效果，但是不需要与远程服务器链接。      </p>
<p><strong>也就是说，无论有无网络连接，App进程是否被杀掉，都可以接收到本地推送。</strong></p>
<p>管理（or触发?）本地推送的两个方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (void)presentLocalNotificationNow:(UILocalNotification *)notification;</span><br><span class="line"></span><br><span class="line">- (void)scheduleLocalNotification:(UILocalNotification *)notification;  // copies notification</span><br></pre></td></tr></table></figure>
<p>第一个，直接触发，平时我用的很少。<br>第二个，把本地通知交给操作系统，操作系统根据通知内包含的信息决定何时何地推送这条本地推送。（附：本地推送会被系统拷贝一份副本，便于触发后的释放）</p>
<p><em>写在最后，做技术的还是少装13，我不知道这位面试官为何会万分肯定在进程被杀掉之后是收不到本地推送的，难道连文档都不看就出来教育别人了么？？？</em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/17/blogCGRectInsetOffset/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/17/blogCGRectInsetOffset/" itemprop="url">关于CGRectInset和CGRectOffset简单说明</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-17T12:51:57+08:00">
                2016-11-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS相关/" itemprop="url" rel="index">
                    <span itemprop="name">iOS相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>首先确定这两个方法都是对CGRect类型的变量进行操作的，写iOS动画代码时经常用到。</p>
<h2 id="1-CGRectInset"><a href="#1-CGRectInset" class="headerlink" title="1.  CGRectInset"></a>1.  CGRectInset</h2><p>不多说，上代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// center 为 (200, 200), 由(100+200/2, 100+200/2)得</span><br><span class="line">CGRect originalRect = CGRectMake(100, 100, 200, 200);</span><br><span class="line">    </span><br><span class="line">CGRect rect_Inset1 = CGRectInset(originalRect, 10, 10);</span><br><span class="line">CGRect rect_Inset2 = CGRectInset(originalRect, -10, -10);</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;原始矩形大小:%@&quot;, NSStringFromCGRect(originalRect));</span><br><span class="line">NSLog(@&quot;dx=10, dy=10, CGRectInset:%@&quot;, NSStringFromCGRect(rect_Inset1));</span><br><span class="line">NSLog(@&quot;dx=-10, dy=-10, CGRectInset:%@&quot;, NSStringFromCGRect(rect_Inset2));</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">原始矩形大小:&#123;&#123;100, 100&#125;, &#123;200, 200&#125;&#125;</span><br><span class="line">dx=10, dy=10, CGRectInset:&#123;&#123;110, 110&#125;, &#123;180, 180&#125;&#125;</span><br><span class="line">dx=-10, dy=-10, CGRectInset:&#123;&#123;90, 90&#125;, &#123;220, 220&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>根据结果得知：</p>
<ol>
<li>原始矩形center不变，始终是(200, 200)；</li>
<li>原始矩形size变化，width = width-2<em>dx， height = height-2</em>dy;<br><strong>图解：</strong><br><img src="http://img.blog.csdn.net/20161117113924473" alt="这里写图片描述"><br><strong>官方文档：</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/* Inset `rect&apos; by `(dx, dy)&apos; -- i.e., offset its origin by `(dx, dy)&apos;, and</span><br><span class="line">   decrease its size by `(2*dx, 2*dy)&apos;. */</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="2-CGRectOffset"><a href="#2-CGRectOffset" class="headerlink" title="2.  CGRectOffset"></a>2.  CGRectOffset</h2><p>还是上代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CGRect originalRect = CGRectMake(100, 100, 200, 200);</span><br><span class="line"></span><br><span class="line">CGRect rect_Offset1 = CGRectOffset(originalRect, 10, 10);</span><br><span class="line">CGRect rect_Offset2 = CGRectOffset(originalRect, -10, -10);</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;原始矩形大小:%@&quot;, NSStringFromCGRect(originalRect));</span><br><span class="line">NSLog(@&quot;dx=10, dy=10, CGRectOffset:%@&quot;, NSStringFromCGRect(rect_Offset1));</span><br><span class="line">NSLog(@&quot;dx=-10, dy=-10, CGRectOffset:%@&quot;, NSStringFromCGRect(rect_Offset2));</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">原始矩形大小:&#123;&#123;100, 100&#125;, &#123;200, 200&#125;&#125;</span><br><span class="line">dx=10, dy=10, CGRectOffset:&#123;&#123;110, 110&#125;, &#123;200, 200&#125;&#125;</span><br><span class="line">dx=-10, dy=-10, CGRectOffset:&#123;&#123;90, 90&#125;, &#123;200, 200&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>根据结果得知：</p>
<ol>
<li>原始矩形size不变，始终是 (200, 200);</li>
<li>原始矩形center改变，x = x+dx, y = y+dy;<br><strong>图解：</strong><br><img src="http://img.blog.csdn.net/20161117125058657" alt="这里写图片描述"><br><strong>官方文档：</strong></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/* Offset `rect&apos; by `(dx, dy)&apos;. */</span><br></pre></td></tr></table></figure>
<p><em>以上若有错误或不足，欢迎指正，感谢</em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/02/23/blogALAssetPropertyAssetURL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/23/blogALAssetPropertyAssetURL/" itemprop="url">关于ALAsset的ALAssetPropertyAssetURL如何获取图片</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-23T18:35:01+08:00">
                2016-02-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS相关/" itemprop="url" rel="index">
                    <span itemprop="name">iOS相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>I want to get the name of the image picked from the library or newly clicked in -</p>
<pre><code>-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
</code></pre><p>I am using this code:</p>
<pre><code>-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    if ([UIImagePickerController isSourceTypeAvailable: UIImagePickerControllerSourceTypeSavedPhotosAlbum])
    {
        AppDelegate *del = [[UIApplication sharedApplication]delegate];
        [self dismissModalViewControllerAnimated:YES];
        image = [info objectForKey:UIImagePickerControllerOriginalImage];

        NSLog(@&quot;imagekbgfg=====&gt;%@&quot;,image);
        [self.imageView setImage:image];

        imgName = [info objectForKey:UIImagePickerControllerOriginalImage];

        del.mainImgName = imgName;
        del.imageData = UIImageJPEGRepresentation(image, 1.0);
        del.imageApp = image;
    }

    if ([UIImagePickerController isSourceTypeAvailable: UIImagePickerControllerSourceTypeCamera])
    {
       image = [info objectForKey:UIImagePickerControllerOriginalImage];
    }
}
</code></pre><p>How can I do this?</p>
<p>——————————————————————————</p>
<p>Using the code bellow you will get path like:assets-library://asset/asset.JPG?id=79450962-C0FD-484C-808B-83E045F40972&amp;ext=JPG when your picking image from photo album. This path is valid. It contains the asset ID and asset type.</p>
<pre><code>// Firstly get the picked image&apos;s file URL.
NSURL *imageFileURL = [info objectForKey:UIImagePickerControllerReferenceURL];

// Then get the file name.
NSString *imageName = [imageFileURL lastPathComponent];
NSLog(@&quot;image name is %@&quot;, imageName);
If you want to get image user picked again using the path you get using UIImagePickerController.(Here maybe you want to save the path so that you can read that image back without asking user to pick that image again) You will need the ALAssetsLibrary otherwise you don&apos;t need it.

ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
__block UIImage *returnValue = nil;
[library assetForURL:imageFileURL resultBlock:^(ALAsset *asset) {
    returnValue = [UIImage imageWithCGImage:[[asset defaultRepresentation] fullResolutionImage]];
} failureBlock:^(NSError *error) {
    NSLog(@&quot;error : %@&quot;, error);
}];
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/04/blog160104/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/01/04/blog160104/" itemprop="url">《笔记》自定义UITableView的headerView设置背景色无效的解决方案</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-01-04T16:21:26+08:00">
                2016-01-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS相关/" itemprop="url" rel="index">
                    <span itemprop="name">iOS相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>自定义headerView设置背景色无效，提示：</p>
<p><em>Changing the background color on a UITableViewHeaderFooterView loaded from a xib says to use contentView.backgroundColor instead</em></p>
<p>但是调用 contentView.background也无效，因为自定义的headerView并没有这个contentView，也就是说<strong>contentView = nil</strong>。</p>
<p>解决方法就是在自定义headerView的最下层，放一个bgView充当背景色，或者放一张图片在最下边。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/11/03/blogStoryBoardReferences/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/03/blogStoryBoardReferences/" itemprop="url">关于iOS 9里 Storyboard References出现的问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-11-03T18:01:59+08:00">
                2015-11-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS相关/" itemprop="url" rel="index">
                    <span itemprop="name">iOS相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Storyboard References 是iOS 9 新增的功能，如图:<br><img src="http://img.blog.csdn.net/20151103180808269?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>很实用的一个功能，简化storyboard，看起来清爽一些，如图:</p>
<p><img src="http://img.blog.csdn.net/20151103180852994?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>但是，一定要注意一件事，编译的Deployment Target 设置为9.0或以上，否则会报如下错误</p>
<p>Storyboard References cannot be the destinations of relationship segues prior to iOS 9.0</p>
<p>ps: 我放弃使用了</p>
<p><em>以上若有错误，欢迎提出意见，感谢</em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/09/10/blog15091001/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/09/10/blog15091001/" itemprop="url">解决 403 Forbidden You don't have permission to access / on this server</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-09-10T16:14:50+08:00">
                2015-09-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>碰到一个问题，开启了mac自带的Apache，结果当访问里面的文件夹时，出现  <strong>403 Forbidden You don’t have permission to access / on this server</strong>，网上各种查阅资料，没有解决，原因是，那些解决方案是低版本的apache，而我的电脑是<strong>Apache/2.4.10 (Unix)</strong></p>
<p>解决方法：</p>
<ol>
<li>打开终端，输入 sudo vi /etc/apache2/httpd.conf</li>
<li>找到<img src="http://img.blog.csdn.net/20150910161116476" alt="这里写图片描述"></li>
<li>改成2中所示</li>
</ol>
<p>自己遇到的问题，记下</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/07/16/blogCppDefine/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/07/16/blogCppDefine/" itemprop="url">C++慎用define，以及相关的替代的方法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-07-16T22:13:13+08:00">
                2015-07-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程语言/" itemprop="url" rel="index">
                    <span itemprop="name">编程语言</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="有哪些问题："><a href="#有哪些问题：" class="headerlink" title="有哪些问题："></a>有哪些问题：</h2><p>在C++中，宏是一个非常好用的预处理功能，同时，它又有一些不好的地方，特别是用#define来实现macros，如果你这样做的话，你肯定要为每个参数都加上小括号，否则你懂得。但是这样仍然存在问题，说一个最近看到的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/*求两个变量中最大的那个*/</span><br><span class="line">#define THE_MAX(a, b) f((a) &gt; (b) ? (a) : (b))</span><br></pre></td></tr></table></figure>
<p>看着就头疼好吧- -!<br>当你这样用的时候：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">THE_MAX(++a, ++b);</span><br></pre></td></tr></table></figure>
<p>如果有人这样使用了这个宏，那么很明显的是，a和b总有一个会多累加一次。<br>那先总结一下#define的缺点吧，优点就不说了- -!</p>
<ol>
<li>#define不重视scope的概念，或者说没有，一旦被定义，就一直有效，除非在某个地方被＃undef；</li>
<li>由于1的原因，＃define不提供封装性，也就没有private这种权限之类的；</li>
<li>由于是预处理命令，所以定义的符号不会进入符号表内，对于调试的过程，很可能会让你头疼；</li>
</ol>
<hr>
<h2 id="define的替代"><a href="#define的替代" class="headerlink" title="define的替代"></a>define的替代</h2><p><strong>1.对于＃define  I_VAR  123</strong></p>
<pre><code>const int iVar = 123可以替换上面的宏
有两个需要注意的地方：
(1) 当定义的是常量指针，需要const两次（ const char* const iVar = &quot;C++&quot;）,第一个const是防止值被改变，第二个const防止地址被改变。
(2) 当定义到class内时，需要用static来修饰这个变量，防止出现多个实体，代码如下：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class A &#123;</span><br><span class="line">private:</span><br><span class="line">	int i;</span><br><span class="line">	doubel d;</span><br><span class="line">	static const iVar = 15;</span><br><span class="line">	...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>还有一个需要说一下，有些编译器需要你在.cpp文件内去定义这个常量：<code>A::iVar;</code><br>由于声明时已经指定了值，所以定义时不要再去赋值，当然你也可以在声明时不指定任何值，而在定义时在确定这个值。</p>
<p><strong>2. 对于＃define FUNC(a, b) f((a) &gt; (b) ? (a) : (b))</strong></p>
<p>可以写一个inline函数来替代：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">template&lt;typename T&gt;</span><br><span class="line">inline void func(const T&amp; a, const T&amp; b)</span><br><span class="line">&#123;</span><br><span class="line">	f(a &gt; b ? a : b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后，我们仍然离不开＃define，但是我们要合理的去使用它，上面文章有不对的地方，欢迎指正，谢谢！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="WeiJP" />
          <p class="site-author-name" itemprop="name">WeiJP</p>
           
              <p class="site-description motion-element" itemprop="description">无聊的XX十之八九，而有趣的灵魂万里挑一</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">Artikel</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">Kategorien</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">Tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/WeiJP" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://weijinpeng2012@gmail.com" target="_blank" title="E-Mail">
                  
                    <i class="fa fa-fw fa-envelope"></i>
                  
                    
                      E-Mail
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://blog.csdn.net/u013679882" target="_blank" title="CSDN">
                  
                    <i class="fa fa-fw fa-link"></i>
                  
                    
                      CSDN
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">WeiJP</span>
</div>


<div class="powered-by">
  Erstellt mit  <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  



  
  









  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>

  
  <script type="text/javascript" src="/lib/three/three.min.js"></script>

  
  <script type="text/javascript" src="/lib/three/three-waves.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
