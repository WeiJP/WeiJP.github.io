<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  
    
      
    

    
  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Bungee:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="无聊的XX十之八九，而有趣的灵魂万里挑一">
<meta property="og:type" content="website">
<meta property="og:title" content="Wei&#39;Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Wei&#39;Blog">
<meta property="og:description" content="无聊的XX十之八九，而有趣的灵魂万里挑一">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Wei&#39;Blog">
<meta name="twitter:description" content="无聊的XX十之八九，而有趣的灵魂万里挑一">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Wei'Blog</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Wei'Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Kategorien
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/07/blog17120701/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/07/blog17120701/" itemprop="url">《笔记》iOS deviceToken的获取时机及推送相关</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-07T00:27:50+08:00">
                2017-12-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS相关/" itemprop="url" rel="index">
                    <span itemprop="name">iOS相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近几天在做一个新项目，需要用到deviceToken，于是有了以下的问题：<br><strong>1、</strong> deviceToken是什么时机能获取，即</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (void)application:(UIApplication *)application</span><br><span class="line">didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken</span><br><span class="line">// Tells the delegate that the app successfully registered with Apple Push Notification service (APNs).</span><br></pre></td></tr></table></figure>
<p> 印象中是在点了弹出通知权限的alert的同意键，然后才开始注册apns，然后回调该方法，获取deviceToken。<br> 但是如此是满足不了当前的需求的，我需要无论允许还是拒绝，都能拿到deviceToken，解决方案为：<br> 勾选<strong>Background Modes</strong>中的<strong>remote notification</strong> 和 <strong>background fetch</strong>，即可达到在注册notificationSettings的时候获取到<strong><em>deviceToken</em></strong>，也就是弹权限请求alert的同时。<em>(注：其实只勾选前者即可)</em></p>
<p><strong>2、</strong> 由上引发思考，上面勾选的两个设置有什么作用？<br>说来惭愧，这俩都是iOS 7就引入的新特性了。。。。一个是后台应用刷新，一个是静默推送（Silent Remote Notifications），网上关于这俩的资源还是很多的，也没啥可说的，照着文档来就行</p>
<p><strong>3、</strong> 为什么勾选（打开）静默推送就可以不经过用户允许，直接拿到<strong><em>deviceToken</em></strong> 呢，那么是不是可以无视用户的通知权限来进行静默推送呢？于是测试了一下，果然如此，在我点击了拒绝之后，仍然能收到静默推送<br><img src="http://img.blog.csdn.net/20171207001729490?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzY3OTg4Mg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>同时发现，app前台运行时，普通推送也能收到，只是不会展示，猜测后台时也会收到，等回头不忙了，再写个<strong>UNNotificationServiceExtension</strong> 测试一下</p>
<p>推送作为一个很重要的功能，几乎每次iOS大版本都会有改动，用起来还是谨慎一些为好，多测试一下</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/15/blog17112401/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/15/blog17112401/" itemprop="url">记录一下，关于qq空间分享的Icon不显示的问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-15T16:40:27+08:00">
                2017-11-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS相关/" itemprop="url" rel="index">
                    <span itemprop="name">iOS相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://img.blog.csdn.net/20171115163817275?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzY3OTg4Mg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>没用第三方的分享sdk，然后腾讯自己的文档实在是辣眼睛，分享url到QQ好友没有任何问题，分享到QQ空间Icon加载不出来，也怀疑过是不是尺寸的问题，最终发现是不能分享本地图片，必须是图片的URL才行，简直太坑了，官方文档只字不提，而且还给了使用本地图片的Api，下边是从shareSDK的官网上找到的说明：</p>
<hr>
<p><strong>QQ空间支持分享文字和图文</strong><br>参数说明<br>title：最多200个字符<br>text：最多600个字符</p>
<p>QQ空间本身不支持分享本地图片，因此如果想分享本地图片，需要去QQ互联，也就是注册应用的地方，先让你的应用通过审核，然后获取upload_pic这个接口的权限，图片会先上传到ShareSDK的文件服务器，得到连接以后才分享此链接。本地图片更耗流量。</p>
<hr>
<p>所以，用第三方分享sdk的小伙伴应该是没有什么问题的。。。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/24/blogModelPresent/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/24/blogModelPresent/" itemprop="url">在modal viewcontroller外点击屏幕dismiss</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-08-24T11:37:21+08:00">
                2017-08-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS相关/" itemprop="url" rel="index">
                    <span itemprop="name">iOS相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="想要的结果："><a href="#想要的结果：" class="headerlink" title="想要的结果："></a>想要的结果：</h1><p><strong>自定义转场动画，弹出modalViewController，然后点击周围可以dismiss掉。</strong></p>
<p>最终实现的效果忘记截图了，欢迎下载《现在视频》体验一下。。。。。。</p>
<h1 id="问题："><a href="#问题：" class="headerlink" title="问题："></a>问题：</h1><p>因为自定义转场动画后，present出VC大小被改变了。<br>点击周围，实际上落点并不在当前的modalViewController内。所以点击手势并不能添加到当前的VC（也就是modalViewController）上。</p>
<h1 id="实现方法："><a href="#实现方法：" class="headerlink" title="实现方法："></a>实现方法：</h1><p>我的实现方法是：给<strong>self.view.window</strong>添加一个tap，在手势的代理中判断点击是否在controller内。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">let tap = UITapGestureRecognizer(target: self, action: #selector(你的响应方法，实现为空即可))</span><br><span class="line">    override func viewDidAppear(_ animated: Bool) &#123;</span><br><span class="line">        super.viewDidAppear(animated)</span><br><span class="line">        </span><br><span class="line">        tap.delegate = self</span><br><span class="line">        self.view.window?.addGestureRecognizer(tap)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    override func viewWillDisappear(_ animated: Bool) &#123;</span><br><span class="line">        super.viewWillDisappear(animated)</span><br><span class="line">        </span><br><span class="line">        tap.delegate = nil</span><br><span class="line">        self.view.window?.removeGestureRecognizer(tap)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>实际的操作在这里：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">extension XZBasicViewController: UIGestureRecognizerDelegate &#123;</span><br><span class="line">    func gestureRecognizerShouldBegin(_ gestureRecognizer: UIGestureRecognizer) -&gt; Bool &#123;</span><br><span class="line">        let point = gestureRecognizer.location(in: self.view)</span><br><span class="line">        if !self.view.point(inside: point, with: nil) &#123;</span><br><span class="line">            self.navigationController?.dismiss(animated: true, completion: &#123;</span><br><span class="line">            &#125;)</span><br><span class="line">            return true</span><br><span class="line">        &#125;</span><br><span class="line">        return false</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>以上有错误，或者有更好的实现方式，欢迎提出，感谢</em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/03/blog-misic-FarewellMyConcubine/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/03/blog-misic-FarewellMyConcubine/" itemprop="url">当爱已成往事 - 张国荣</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-03T10:50:34+08:00">
                2017-07-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Favorite-MV/" itemprop="url" rel="index">
                    <span itemprop="name">Favorite MV</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>在youtube上偶然间听到的，歌好听，mv也好看，非常非常经典的电影，如果有缘看到这个博客，建议去看《霸王别姬》</strong></p>
<p><em><a href="https://www.youtube.com/watch?v=0kA7sSBH93o&amp;list=RD0kA7sSBH93o&amp;t=259" title="Farewell my concubine" target="_blank" rel="noopener">mv地址（需翻墙）</a></em></p>
<p><em><a href="https://www.bilibili.com/video/av11786772/" title="Farewell my concubine" target="_blank" rel="noopener">mv地址（不需翻墙）</a></em></p>
<img src="/2017/07/03/blog-misic-FarewellMyConcubine/mv1.png">
<p>Song: 當愛已成往事<br>Artist:  張國榮 | Leslie Cheung<br>Main theme of Farewell My Concubine (  霸王別姬) (1993) by Chen Kaige</p>
<p>當愛已成往事</p>
<p>往事不要再提 人生已多風雨 縱然記憶抹不去 愛與恨都還在心裡<br>真的要斷了過去 讓明天好好繼續 你就不要再苦苦追問我的消息<br>愛情它是個難題 讓人目眩神迷 忘了痛或許可以 忘了你卻太不容易<br>你不曾真的離去 你始終在我心裡 我對你仍有愛意 我對自己無能為力<br>因為我仍有夢 依然將你放在我心中 總是容易被往事打動 總是為了你心痛<br>別流連歲月中 我無意的柔情萬種 不要問我是否再相逢 不要管我是否言不由衷<br>為何你不懂 只要有愛就有痛 有一天你會知道 人生沒有我並不會不同<br>人生已經太匆匆 我好害怕總是淚眼朦朧 忘了我就沒有痛 將往事留在風中</p>
<p>~間奏~</p>
<p>因為我仍有夢 依然將你放在我心中 總是容易被往事打動 總是為了你心痛<br>別流連歲月中 我無意的柔情萬種 不要問我是否再相逢 不要管我是否言不由衷<br>為何你不懂 只要有愛就有痛 有一天你會知道 人生沒有我並不會不同<br>人生已經太匆匆 我好害怕總是淚眼朦朧 忘了我就沒有痛 將往事留在風中</p>
<p>為何你不懂 只要有愛就有痛 有一天你會知道 人生沒有我並不會不同<br>人生已經太匆匆 我好害怕總是淚眼朦朧 忘了我就沒有痛 將往事留在風中</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/03/blogBoyerMoore/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/03/blogBoyerMoore/" itemprop="url">Boyer-Moore字符串查找算法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-03T01:08:41+08:00">
                2017-04-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据结构和算法/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构和算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这是一种类似于KMP但是更高效一点、也更简单一些的字符串查找算法，大体的思路是从右往左扫描，例如在txt = ABCBCDCDE中查找模式串pat = BCD，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ABCBCDCDE</span><br><span class="line">BCD</span><br></pre></td></tr></table></figure>
<p>从右往左，第一个比较的字符是 C 和 D ，不匹配，C 在 BCD 里出现的所有位置中最靠右是 1，那么 BCD 右移 1 位，比较 B 和 D ，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ABCBCDCDE</span><br><span class="line"> BCD</span><br></pre></td></tr></table></figure></p>
<p>不匹配，B 在 BCD里出现的所有位置中最靠右是 0，那么BCD右移 2 位，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ABCBCDCDE</span><br><span class="line">   BCD</span><br></pre></td></tr></table></figure></p>
<p>匹配成功，当然例子有些简单，看完以下的具体规则后，就会消除你所有的顾虑 = =！<br>具体的规则如下：（ i 是 txt 中的游标，j 是 pat 中的游标）</p>
<pre><code>1. 如果失配字符不在 pat 中，那么 pat 右移 j+1 个位置，也就是 i += j+1 继续比较。这条应该是浅显易懂，不懂得在纸上画一下就知道了。

2. 如果失配字符在 pat 中，那么 pat 右移，使得适配字符与 pat 中该字符出现的所有位置中最右的那个对齐，即右移 j - x 即 i += j - x ，x 即是最右位置。

3. 如果以上两条不能使 i 增大，i += 1。
</code></pre><p>以上第 2 条的 x 可以通过预处理来提前计算好，计算的代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">int right[256];</span><br><span class="line">memset(right, -1, sizeof(int) * 256);// 初始化为-1</span><br><span class="line"></span><br><span class="line">for (int k = 0; k &lt; strlen(pat); ++k) &#123;</span><br><span class="line">    right[pat[k]] = k;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>查找代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">int skip = 0;</span><br><span class="line">for (int i = 0; i &lt; strlen(txt) - strlen(pat); i += skip) &#123;</span><br><span class="line">    skip = 0;</span><br><span class="line">    for (int j = (int)strlen(pat)-1; j &gt;= 0; --j) &#123;</span><br><span class="line">        if (txt[i+j] != pat[j]) &#123; // 字符匹配失败</span><br><span class="line">            skip = j - right[pat[j]];</span><br><span class="line">            if (skip &lt; 1) &#123; // i 无法增大</span><br><span class="line">                skip += 1;</span><br><span class="line">            &#125;</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (skip == 0) &#123; // 全部匹配成功</span><br><span class="line">        return i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>PS：可以根据KMP的思路，优化一下，即已经匹配过的，是不是有相同的串。</p>
<p>参考：《算法》第四版</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/19/blogKMPDFA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/19/blogKMPDFA/" itemprop="url">KMP算法的DFA解法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-19T23:54:40+08:00">
                2017-03-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据结构和算法/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构和算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>简单说一下，KMP是一个时间复杂度O（n+m）的字符串匹配算法，网上也有很多其他的解法，比如next数组的解法，推荐看<a href="http://blog.csdn.net/u011564456/article/details/20862555?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="noopener">这里</a></p>
<h2 id="匹配的思路"><a href="#匹配的思路" class="headerlink" title="匹配的思路"></a>匹配的思路</h2><hr>
<p><strong>DFA：确定有限自动状态机</strong><br>以下是ABABAC的对应的DFA：<br><img src="http://img.blog.csdn.net/20170319213709334?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzY3OTg4Mg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<pre><code>1.假设文本为txt，待匹配的子串为pat。

2.未匹配是状态0，此时如果条件A（匹配到了txt的字符‘A‘），会到状态1，如果是条件B、C或其他的条件，还是状态0。如果经历了匹配ABABA之后到达状态5，再匹配C到达状态6，即停止状态，也就是匹配成功。

3.很明显，dfa[][]是一个二维数组,dfa[&apos;A&apos;][3]就是在状态3时，下一个条件是A时，要跳转到哪一个状态。

4.匹配的过程就是：不断的用txt的字符 + 当时的状态去dfa取值，直到状态6 or txt匹配到最后一个字符，结束。

5.匹配过程中，txt的字符是一个一个往后取，不会回溯，只是状态一直在变化，即本次使用的是上一次匹配后的状态，不会回溯，正是KMP算法相对于暴力解法的优势。
</code></pre><h2 id="DFA数组的构建"><a href="#DFA数组的构建" class="headerlink" title="DFA数组的构建"></a>DFA数组的构建</h2><hr>
<p>上边的思路如果理解了，那么剩下的问题就是如何构建dfa[][]，当然这也是难点。dfa[][]的元素分为两类：1，匹配成功；2，匹配失败。</p>
<p><strong>1.匹配成功</strong><br>初始可确定的状态为：<br>dfa[pat[0]][0] = 1;<br>即在状态0匹配到子串的第一个字符，到达状态1；<br>dfa[pat[1]][1] = dfa[pat[0]][0] + 1</p>
<p><strong>2.匹配失败</strong><br>初始的第一列，即状态0时，匹配失败应该还是状态0，也就是除上述dfa[pat[0]][0] = 1外，其他都为状态0。<br>那么状态j时，匹配失败：（模拟回溯）<br>假设此时匹配到c = txt[i]，然后查找dfa找到跳转到哪个状态，那么txt[i-j…i-1]这部分与pat[0…j-1]这部分是匹配的。因为i-j为起始而整体不匹配，所以pat要右移一位，所以txt[i-j]舍弃了，不用比较了，也就是在状态j遇到条件c的要跳转的状态，txt[i-j+1 … i-1] == pat[1 … j-1]。<br>引入一个状态指示数组X，X[j]是指正确输入p[1…j-1]后进入的状态，输入p[1…j-1]c后进入的状态就是dfa[c][X[j]]（在X[j]状态时输入c），即dfa[c][j]=dfa[c][x[j]]。<br>X[j+1]为正确输入p[1…j]后进入的状态，即正确输入p[1…j-1]p[j]后进入的状态，也就是在X[j]状态时输入p[j]时进入的状态，就是dfa[pat.charAt[j]][X[j]]，即递推公式为：X[j+1]=dfa[pat.charAt[j]][X[j]]，而X[0]手动初始化为0。<br><strong><em>故有：</em></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">dfa[pat[0]][0] = 1;</span><br><span class="line">    int X = 0;</span><br><span class="line">    for (j = 1; j &lt; M; ++j)&#123;</span><br><span class="line">        for(i = 0; i &lt; R; ++i) &#123;</span><br><span class="line">            dfa[i][j] = dfa[i][X];</span><br><span class="line">        &#125;</span><br><span class="line">        dfa[pat[j]][j] = j + 1; //匹配成功</span><br><span class="line">        X = dfa[pat[j]][X]; //更新重启状态</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>附所有代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">int test_jp_search() &#123;</span><br><span class="line">    int index = jp_search(&quot;BCBAABACAABABACAA&quot;, &quot;ABABAC&quot;);</span><br><span class="line">    printf(&quot;%d\n&quot;, index);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int jp_search(char *txt, char *sub)</span><br><span class="line">&#123;</span><br><span class="line">    int M = (int)strlen(sub);</span><br><span class="line">    int R = 256;</span><br><span class="line">    //二维数组定义并初始化</span><br><span class="line">    int dfa[R][M];</span><br><span class="line">    int i = 0, j = 0;</span><br><span class="line">    for (i = 0; i &lt; R; ++i) &#123;</span><br><span class="line">        for (int j = 0; j &lt; M; ++j) &#123;</span><br><span class="line">            dfa[i][j] = 0;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dfa[sub[0]][0] = 1;</span><br><span class="line">    int X = 0;</span><br><span class="line">    for (j = 1; j &lt; M; ++j)&#123;</span><br><span class="line">        for(i = 0; i &lt; R; ++i) &#123;</span><br><span class="line">            dfa[i][j] = dfa[i][X];</span><br><span class="line">        &#125;</span><br><span class="line">        dfa[sub[j]][j] = j + 1; //匹配成功</span><br><span class="line">        X = dfa[sub[j]][X]; //更新重启状态</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    int N = (int)strlen(txt);</span><br><span class="line">    for (i = 0, j = 0; i &lt; N &amp;&amp; j &lt; M; ++i)&#123;</span><br><span class="line">        j = dfa[txt[i]][j];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    if (j == M) &#123;</span><br><span class="line">        return i - M;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        return M;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ps：感觉还是有点乱，回头再整理一下思路</p>
<p>参考：<br>1.《算法》第四版<br>2.<a href="http://book.douban.com/subject/19952400/discussion/59623403/" target="_blank" rel="noopener">链接</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/29/blogLocalNotification/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/29/blogLocalNotification/" itemprop="url">关于iOS 9之前的本地推送，本地推送杀掉进程后到底能不能收到？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-29T11:49:01+08:00">
                2016-11-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS相关/" itemprop="url" rel="index">
                    <span itemprop="name">iOS相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="缘起一个面试："><a href="#缘起一个面试：" class="headerlink" title="缘起一个面试："></a>缘起一个面试：</h2><p><strong>面试官</strong>:“本地推送，在杀掉进程以后还可以收到吗？”<br><strong>我</strong>（非常肯定的）:“可以的”<br><strong>面试官</strong>：“并不能，不信你回去写个demo吧”<br><strong>我</strong>：“我写过本地推送，确实是可以的啊”<br><strong>面试官</strong>：“如果杀掉进程后，还能收到本地推送，那还要远程推送干什么呢？？？”<br><strong>我</strong>：“。。。。。。”</p>
<p>本来无意来计较这件事，但是面试过程中，面试官态度比较强硬、瞧不起人，让人很反感，但还是不说哪家公司了</p>
<p><img src="http://img.blog.csdn.net/20161129104433799" alt="这个结果根本不意外吧，稍微做过一两年开发的都知道"></p>
<p><strong>今天我就写一个Demo，然后再唠叨原理</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">// 以下代码只为简单的验证问题，不是教程，诸位凑合看吧</span><br><span class="line">// 注册通知</span><br><span class="line">+ (void)registerPush</span><br><span class="line">&#123;</span><br><span class="line">    UILocalNotification *localNotification = [[UILocalNotification alloc] init];</span><br><span class="line">    </span><br><span class="line">    localNotification.fireDate = [NSDate dateWithTimeIntervalSinceNow:15];</span><br><span class="line">    localNotification.alertBody = @&quot;I am a LocalNotification!&quot;;</span><br><span class="line">    localNotification.alertAction = @&quot;check&quot;;</span><br><span class="line">    localNotification.hasAction = YES;</span><br><span class="line">    localNotification.applicationIconBadgeNumber = 1;</span><br><span class="line">    </span><br><span class="line">    [[UIApplication sharedApplication] scheduleLocalNotification:localNotification];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *   iOS 8 以后的版本需要添加推送类型</span><br><span class="line"> *   官方文档：In iOS 8.0 and later, your application must register for user notifications using -[UIApplication registerUserNotificationSettings:] before being able to schedule and present UILocalNotifications</span><br><span class="line"> */</span><br><span class="line">+ (void)registerPushType</span><br><span class="line">&#123;</span><br><span class="line">    if (NSFoundationVersionNumber &gt;= NSFoundationVersionNumber_iOS_8_0) &#123;</span><br><span class="line">        UIUserNotificationType type=UIUserNotificationTypeBadge | UIUserNotificationTypeAlert | UIUserNotificationTypeSound;</span><br><span class="line">        UIUserNotificationSettings *setting=[UIUserNotificationSettings settingsForTypes:type categories:nil];</span><br><span class="line">        [[UIApplication sharedApplication]registerUserNotificationSettings:setting];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 清除角标</span><br><span class="line">+ (void)clearIconBadgeNumber</span><br><span class="line">&#123;</span><br><span class="line">    [UIApplication sharedApplication].applicationIconBadgeNumber = 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="本地推送的机制"><a href="#本地推送的机制" class="headerlink" title="本地推送的机制"></a>本地推送的机制</h2><p>看官方文档<a href="https://developer.apple.com/reference/uikit/uilocalnotification?language=objc" target="_blank" rel="noopener">点击这里</a>，第一句话是：<br>The operating system is responsible for delivering local notifications at their scheduled times; the app does not have to be running for this to happen.Although local notifications are similar to remote notifications in that they are used for displaying alerts, playing sounds, and badging app icons, they are composed and delivered locally and do not require connection with remote servers.<br>明确说明了本地推送是由操作系统负责触发的，不需要App本身，后边还特别注明了尽管与远程推送一样的效果，但是不需要与远程服务器链接。      </p>
<p><strong>也就是说，无论有无网络连接，App进程是否被杀掉，都可以接收到本地推送。</strong></p>
<p>管理（or触发?）本地推送的两个方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (void)presentLocalNotificationNow:(UILocalNotification *)notification;</span><br><span class="line"></span><br><span class="line">- (void)scheduleLocalNotification:(UILocalNotification *)notification;  // copies notification</span><br></pre></td></tr></table></figure>
<p>第一个，直接触发，平时我用的很少。<br>第二个，把本地通知交给操作系统，操作系统根据通知内包含的信息决定何时何地推送这条本地推送。（附：本地推送会被系统拷贝一份副本，便于触发后的释放）</p>
<p><em>写在最后，做技术的还是少装13，我不知道这位面试官为何会万分肯定在进程被杀掉之后是收不到本地推送的，难道连文档都不看就出来教育别人了么？？？</em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/17/blogCGRectInsetOffset/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/17/blogCGRectInsetOffset/" itemprop="url">关于CGRectInset和CGRectOffset简单说明</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-17T12:51:57+08:00">
                2016-11-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS相关/" itemprop="url" rel="index">
                    <span itemprop="name">iOS相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>首先确定这两个方法都是对CGRect类型的变量进行操作的，写iOS动画代码时经常用到。</p>
<h2 id="1-CGRectInset"><a href="#1-CGRectInset" class="headerlink" title="1.  CGRectInset"></a>1.  CGRectInset</h2><p>不多说，上代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// center 为 (200, 200), 由(100+200/2, 100+200/2)得</span><br><span class="line">CGRect originalRect = CGRectMake(100, 100, 200, 200);</span><br><span class="line">    </span><br><span class="line">CGRect rect_Inset1 = CGRectInset(originalRect, 10, 10);</span><br><span class="line">CGRect rect_Inset2 = CGRectInset(originalRect, -10, -10);</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;原始矩形大小:%@&quot;, NSStringFromCGRect(originalRect));</span><br><span class="line">NSLog(@&quot;dx=10, dy=10, CGRectInset:%@&quot;, NSStringFromCGRect(rect_Inset1));</span><br><span class="line">NSLog(@&quot;dx=-10, dy=-10, CGRectInset:%@&quot;, NSStringFromCGRect(rect_Inset2));</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">原始矩形大小:&#123;&#123;100, 100&#125;, &#123;200, 200&#125;&#125;</span><br><span class="line">dx=10, dy=10, CGRectInset:&#123;&#123;110, 110&#125;, &#123;180, 180&#125;&#125;</span><br><span class="line">dx=-10, dy=-10, CGRectInset:&#123;&#123;90, 90&#125;, &#123;220, 220&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>根据结果得知：</p>
<ol>
<li>原始矩形center不变，始终是(200, 200)；</li>
<li>原始矩形size变化，width = width-2<em>dx， height = height-2</em>dy;<br><strong>图解：</strong><br><img src="http://img.blog.csdn.net/20161117113924473" alt="这里写图片描述"><br><strong>官方文档：</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/* Inset `rect&apos; by `(dx, dy)&apos; -- i.e., offset its origin by `(dx, dy)&apos;, and</span><br><span class="line">   decrease its size by `(2*dx, 2*dy)&apos;. */</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="2-CGRectOffset"><a href="#2-CGRectOffset" class="headerlink" title="2.  CGRectOffset"></a>2.  CGRectOffset</h2><p>还是上代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CGRect originalRect = CGRectMake(100, 100, 200, 200);</span><br><span class="line"></span><br><span class="line">CGRect rect_Offset1 = CGRectOffset(originalRect, 10, 10);</span><br><span class="line">CGRect rect_Offset2 = CGRectOffset(originalRect, -10, -10);</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;原始矩形大小:%@&quot;, NSStringFromCGRect(originalRect));</span><br><span class="line">NSLog(@&quot;dx=10, dy=10, CGRectOffset:%@&quot;, NSStringFromCGRect(rect_Offset1));</span><br><span class="line">NSLog(@&quot;dx=-10, dy=-10, CGRectOffset:%@&quot;, NSStringFromCGRect(rect_Offset2));</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">原始矩形大小:&#123;&#123;100, 100&#125;, &#123;200, 200&#125;&#125;</span><br><span class="line">dx=10, dy=10, CGRectOffset:&#123;&#123;110, 110&#125;, &#123;200, 200&#125;&#125;</span><br><span class="line">dx=-10, dy=-10, CGRectOffset:&#123;&#123;90, 90&#125;, &#123;200, 200&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>根据结果得知：</p>
<ol>
<li>原始矩形size不变，始终是 (200, 200);</li>
<li>原始矩形center改变，x = x+dx, y = y+dy;<br><strong>图解：</strong><br><img src="http://img.blog.csdn.net/20161117125058657" alt="这里写图片描述"><br><strong>官方文档：</strong></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/* Offset `rect&apos; by `(dx, dy)&apos;. */</span><br></pre></td></tr></table></figure>
<p><em>以上若有错误或不足，欢迎指正，感谢</em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/10/31/blogPython161031/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/31/blogPython161031/" itemprop="url">Python的装饰器和with语法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-10-31T14:01:17+08:00">
                2016-10-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python相关/" itemprop="url" rel="index">
                    <span itemprop="name">Python相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;python 2.7&gt;</span><br><span class="line">本文分两部分，第一部分是装饰器，第二部分是with语法，</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@with_connection</span><br><span class="line">def do_some_db_operation():</span><br><span class="line">    db.select(&apos;...&apos;)</span><br><span class="line">    db.update(&apos;...&apos;)</span><br><span class="line">    db.update(&apos;...&apos;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">with db.connection():</span><br><span class="line">    db.select(&apos;...&apos;)</span><br><span class="line">    db.update(&apos;...&apos;)</span><br><span class="line">    db.update(&apos;...&apos;)</span><br></pre></td></tr></table></figure>
<p>上下两个代码片的作用是一样的，关于数据库操作的，都使用了with语法，只不过上边的使用了装饰器，更加方便了。</p>
<h2 id="lt-装饰器-gt"><a href="#lt-装饰器-gt" class="headerlink" title="&lt;装饰器&gt;"></a>&lt;装饰器&gt;</h2><p>动态增加代码功能，定义一个who的装饰器：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import functools</span><br><span class="line"></span><br><span class="line">def who(func):</span><br><span class="line">	@functools.wraps(func)</span><br><span class="line">    def wrapper(*args, **kw):</span><br><span class="line">        增加的功能&apos;x&apos;代码，比如 print &apos;&lt;我是小菜&gt;&apos;</span><br><span class="line">        return func(*args, **kw)</span><br><span class="line">    return wrapper</span><br></pre></td></tr></table></figure>
<p>使用时：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@who</span><br><span class="line">def beatDoudou():</span><br><span class="line">    print &apos;打豆豆&apos;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;我是小菜&gt;</span><br><span class="line">打豆豆</span><br></pre></td></tr></table></figure>
<p>关于<code>@functools.wraps(fund)</code>的作用是：<br>因为在原函数外加了一层wrapper，所以调用<code>beatDoudou.__name__</code>时，返回的是wrapper，并不是beatDoudou，避免有些依赖函数签名的代码执行出错。<br><strong>带参数的装饰器</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import functools</span><br><span class="line"></span><br><span class="line">def who(name):</span><br><span class="line">    def decorator(func):</span><br><span class="line">        @functools.wraps(func)</span><br><span class="line">        def wrapper(*args, **kw):</span><br><span class="line">            print &apos;&lt;我是%s&gt;&apos; % name</span><br><span class="line">            return func(*args, **kw)</span><br><span class="line">        return wrapper</span><br><span class="line">    return decorator</span><br></pre></td></tr></table></figure>
<p>使用时：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@who</span><br><span class="line">def beatDoudou(&apos;大鸟&apos;):</span><br><span class="line">    print &apos;打豆豆&apos;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;我是大鸟&gt;</span><br><span class="line">打豆豆</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;with 语法&gt;</span><br><span class="line">---------</span><br><span class="line"></span><br><span class="line">使用with语法，首先要有上下文管理器（class），这个上下文管理器遵守上下文管理协议，即实现了__enter__() 和 __exit__() 方法，比如（代码看看格式就好）：</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class _ConnectionCtx(object):</span><br><span class="line">	&quot;&quot;&quot;</span><br><span class="line">	with connection():</span><br><span class="line">		pass</span><br><span class="line">		with connection():</span><br><span class="line">			pass</span><br><span class="line">	&quot;&quot;&quot;</span><br><span class="line">	def __enter__(self):</span><br><span class="line">		&quot;&quot;&quot;</span><br><span class="line">		获得一个惰性连接对象</span><br><span class="line">		&quot;&quot;&quot;</span><br><span class="line">		global _db_ctx</span><br><span class="line">		self.should_cleanup = False</span><br><span class="line">		if not _db_ctx.is_init():</span><br><span class="line">			_db_ctx.init()</span><br><span class="line">			self.should_cleanup = True</span><br><span class="line">		return self</span><br><span class="line">	def __exit__(self, exctype, excvalue, traceback):</span><br><span class="line">		&quot;&quot;&quot;</span><br><span class="line">		释放连接对象</span><br><span class="line">		&quot;&quot;&quot;</span><br><span class="line">		global _db_ctx</span><br><span class="line">		if self.should_cleanup:</span><br><span class="line">			_db_ctx.cleanup()</span><br><span class="line">#with _ConnectionCtx():关键句</span><br><span class="line">def with_connection(func):</span><br><span class="line">	&quot;&quot;&quot;</span><br><span class="line">	设计一个装饰器，替换with语法，让代码更优雅</span><br><span class="line">	比如:</span><br><span class="line">        @with_connection</span><br><span class="line">        def foo(*args, **kw):</span><br><span class="line">            f1()</span><br><span class="line">            f2()</span><br><span class="line">            f3()</span><br><span class="line">	&quot;&quot;&quot;</span><br><span class="line">	@functools.wraps(func)</span><br><span class="line">	def _wrapper(*args, **kw):</span><br><span class="line">		with _ConnectionCtx():</span><br><span class="line">			return func(*args, **kw)</span><br><span class="line">	return _wrapper</span><br></pre></td></tr></table></figure>
<p><strong>with语法作用</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">with db.connection():</span><br><span class="line">    db.select(&apos;...&apos;)</span><br><span class="line">    db.update(&apos;...&apos;)</span><br><span class="line">    db.update(&apos;...&apos;)</span><br></pre></td></tr></table></figure></p>
<p>三个数据库操作成为语句块，在执行之前，先执行上下文管理器的<strong>enter</strong>函数，即获得数据库连接；在执行完语句块之后，再执行<strong>exit</strong>函数，即释放数据库连接。</p>
<p><strong>with语句执行过程类似如下：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">以下代码来自[这里](https://www.ibm.com/developerworks/cn/opensource/os-cn-pythonwith/)</span><br><span class="line">context_manager = context_expression</span><br><span class="line">    exit = type(context_manager).__exit__  </span><br><span class="line">    value = type(context_manager).__enter__(context_manager)</span><br><span class="line">    exc = True   # True 表示正常执行，即便有异常也忽略；False 表示重新抛出异常，需要对异常进行处理</span><br><span class="line">    try:</span><br><span class="line">        try:</span><br><span class="line">            target = value  # 如果使用了 as 子句</span><br><span class="line">            with-body     # 执行 with-body</span><br><span class="line">        except:</span><br><span class="line">            # 执行过程中有异常发生</span><br><span class="line">            exc = False</span><br><span class="line">            # 如果 __exit__ 返回 True，则异常被忽略；如果返回 False，则重新抛出异常</span><br><span class="line">            # 由外层代码对异常进行处理</span><br><span class="line">            if not exit(context_manager, *sys.exc_info()):</span><br><span class="line">                raise</span><br><span class="line">    finally:</span><br><span class="line">        # 正常退出，或者通过 statement-body 中的 break/continue/return 语句退出</span><br><span class="line">        # 或者忽略异常退出</span><br><span class="line">        if exc:</span><br><span class="line">            exit(context_manager, None, None, None) </span><br><span class="line">        # 缺省返回 None，None 在布尔上下文中看做是 False</span><br></pre></td></tr></table></figure>
<p>ps：markdown编辑器有bug吧，有些内容显示不出来，只好改成代码片才可以，所以排版有点乱，sorry</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/09/09/blogPythonDocx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WeiJP">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/09/blogPythonDocx/" itemprop="url">如何把网页上的图片写入到docx文档</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-09T18:30:33+08:00">
                2016-09-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python相关/" itemprop="url" rel="index">
                    <span itemprop="name">Python相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>主要是用的是python-docx，安装sudo pip install python-docx，<br>官方文档：<a href="http://python-docx.readthedocs.org/en/latest/" target="_blank" rel="noopener">http://python-docx.readthedocs.org/en/latest/</a></p>
<p>要将链接对应的图片先下载到内存中，然后使用add_picture方法写入docx文档，具体代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import StringIO</span><br><span class="line">from PIL import Image</span><br><span class="line">from docx.shared import Inches</span><br><span class="line"></span><br><span class="line">request = urllib2.Request(imageUrl])</span><br><span class="line">imageData = urllib2.urlopen(request).read()</span><br><span class="line">image_io = StringIO.StringIO()</span><br><span class="line">image_io.write(imageData)</span><br><span class="line">image_io.seek(0)</span><br><span class="line">im = Image.open(image_io)#通过im.size可以获取图片的尺寸，此处我没有用到</span><br><span class="line">doc_new.add_picture(image_io, width=Inches(6))</span><br></pre></td></tr></table></figure>
<p>6英寸的宽度正好是docx文档内容的宽度<br>刚接触python，好神奇</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="WeiJP" />
          <p class="site-author-name" itemprop="name">WeiJP</p>
           
              <p class="site-description motion-element" itemprop="description">无聊的XX十之八九，而有趣的灵魂万里挑一</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">18</span>
                <span class="site-state-item-name">Artikel</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">Kategorien</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">Tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/WeiJP" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://weijinpeng2012@gmail.com" target="_blank" title="E-Mail">
                  
                    <i class="fa fa-fw fa-envelope"></i>
                  
                    
                      E-Mail
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://blog.csdn.net/u013679882" target="_blank" title="CSDN">
                  
                    <i class="fa fa-fw fa-link"></i>
                  
                    
                      CSDN
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">WeiJP</span>
</div>


<div class="powered-by">
  Erstellt mit  <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  



  
  









  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>

  
  <script type="text/javascript" src="/lib/three/three.min.js"></script>

  
  <script type="text/javascript" src="/lib/three/three-waves.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
